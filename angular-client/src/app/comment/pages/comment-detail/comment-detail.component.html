<div class="container" *ngIf="comment$ | async as comment">
  <nsg-comment-row
    [comment]="comment"
    (onUsernameClicked)="viewUserProfile($event)"
    (onReactClicked)="reactToComment($event)"
    (onReplyClicked)="replyToComment($event)"
    (onReactionsCountClicked)="showCommentReactions($event)"
  >
  </nsg-comment-row>

  <!-- replies list -->
  <div class="replies__list" *ngIf="comment.replies.length">
    <!-- view all comments -->
    <div class="paginator">
      <p
        class="paginator__text"
        *ngIf="comment.replies.length < comment.repliesCount"
        (click)="viewPreviousReplies(comment._id)"
      >
        View previous {{ comment.repliesCount - comment.replies.length }} replies
      </p>
    </div>
    <!-- reply row item -->
    <ng-container *ngFor="let reply of comment.replies">
      <nsg-comment-row
        [comment]="reply"
        [bgClass]="getCommentClassByUsername(reply.commentedBy.username)"
        (onUsernameClicked)="viewUserProfile($event)"
        (onReactClicked)="reactToComment($event)"
        (onReplyClicked)="replyToComment($event)"
        (onReactionsCountClicked)="showCommentReactions($event)"
      >
      </nsg-comment-row>
    </ng-container>
  </div>
</div>
