<app-page-header
  [title]="pageHeaderTitle"
  [style]="'sticky'"
  [fontSize]="'1rem'"
  [icon]="'visibility'"
  (onIconClicked)="showPost(comment.commentedToPost?._id)"
></app-page-header>

<!-- comment rows -->
<div class="container" *ngIf="comment">
  <nsg-comment-row
    [comment]="comment"
    (onUsernameClicked)="viewUserProfile($event)"
    (onReactClicked)="openReactionDialog($event, 'COMMENT')"
    (onReplyClicked)="replyToComment($event)"
    (onReactionsCountClicked)="showCommentReactions($event)"
  >
  </nsg-comment-row>

  <!-- replies list -->
  <div class="replies__list" *ngIf="comment.replies.length">
    <!-- view prev replies -->
    <div class="paginator">
      <p
        class="paginator__text"
        *ngIf="replies.length < comment.repliesCount"
        (click)="viewPreviousReplies(comment._id)"
      >
        View previous
        {{ comment.repliesCount - comment.replies.length }} replies
      </p>
    </div>
    <!-- reply row item -->
    <ng-container *ngFor="let reply of replies">
      <nsg-comment-row
        [comment]="reply"
        [bgClass]="getCommentClassByUsername(reply.commentedBy.username)"
        (onUsernameClicked)="viewUserProfile($event)"
        (onReactClicked)="openReactionDialog($event, 'REPLY')"
        (onReplyClicked)="replyToComment($event)"
        (onReactionsCountClicked)="showCommentReactions($event)"
      >
      </nsg-comment-row>
    </ng-container>
  </div>

  <!-- addComment form -->
  <app-form-field
    [placeholder]="'Write your reply..'"
    (onInputConfirmed)="addNewReply($event)"
  ></app-form-field>
</div>
